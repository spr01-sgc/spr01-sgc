
$(document).ready(function () {
    $('#tableCatalogo').DataTable();
    //completaInputs(); 
});

function agregarDelito() {
    var nombre = $("#nombre").val();
    if (nombre == '') {
        alert("El delito no puede ir vacío");
        return;
    }
    var datos = [nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "delito/agregarDelito",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("delito");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
function mostrarNombre() {
    //al dar clic lo que tiene en el renglo lo pase a la caja de texto
    var tablaCatalogo = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#delid").val(idT);
//id de giro
        var idgiT = $('td', this).eq(0).text();
        $("#idgiro").val(idgiT);
//id de usuario
        var idusuariT = $('td', this).eq(0).text();
        $("#idusuario").val(idusuariT);
        //id de pba
        var idpbaT = $('td', this).eq(0).text();
        $("#idpba").val(idpbaT);
        //idpep
        var idpepT = $('td', this).eq(0).text();
        $("#idpep").val(idpepT);
//traer los nombres de los catalogos
        var nombreT = $('td', this).eq(1).text();
        $("#nombre").val(nombreT);
//Trae los nombres de tabla usuario
        var nombreuserT = $('td', this).eq(1).text();
        $("#nick").val(nombreT);
        var passuserT = $('td', this).eq(2).text();
        $("#pass").val(passuserT);
        var emailuserT = $('td', this).eq(3).text();
        $("#email").val(emailuserT);
        var roluserT = $('td', this).eq(4).text();
        $("#roluser").val(roluserT);
        var estatusT = $('td', this).eq(6).text();
        $("#estatususer").val(estatusT);
        var nombreT = $('td', this).eq(8).text();
        $("#name").val(nombreT);
        var apaternoT = $('td', this).eq(9).text();
        $("#apaterno").val(apaternoT);
        var amaternoT = $('td', this).eq(10).text();
        $("#amaterno").val(amaternoT);
        var curpT = $('td', this).eq(11).text();
        $("#curp").val(curpT);
        var sexoT = $('td', this).eq(12).text().trim();
        $("#sexuser").val(sexoT);
        var tiptelT = $('td', this).eq(14).text();
        $("#tipTel").val(tiptelT);
        var idtelT = $('td', this).eq(16).text();
        $("#idtel").val(idtelT);
        var numtelT = $('td', this).eq(17).text();
        $("#numtel").val(numtelT);
        //segunfo tel 
        var tiptelT2 = $('td', this).eq(18).text();
        $("#tipTel2").val(tiptelT2);
        var idtelT2 = $('td', this).eq(20).text();
        $("#idtel2").val(idtelT2);
        var numtelT2 = $('td', this).eq(21).text();
        $("#numtel2").val(numtelT2);
        //datos para PBA
        var numExpT = $('td', this).eq(1).text();
        $("#noEx").val(numExpT);
        var fechBusT = $('td', this).eq(2).text().trim();
        $("#fechBus").val(fechBusT);
        var nomPbaT = $('td', this).eq(3).text();
        $("#nomPba").val(nomPbaT);
        //deshabilita la edicion del campo nombre
        $("#nomPba").prop("disabled", true);
        var apPbaT = $('td', this).eq(4).text();
        $("#apPat").val(apPbaT);
        $("#apPat").prop("disabled", true);
        var amPbaT = $('td', this).eq(5).text();
        $("#apMat").val(amPbaT);
        $("#apMat").prop("disabled", true);
        var curpT = $('td', this).eq(6).text();
        $("#curpPba").val(curpT);
        $("#curpPba").prop("disabled", true);
        var sexPbaT = $('td', this).eq(7).text().trim();
        $("#sexoPba").val(sexPbaT);
        var delitoPbaT = $('td', this).eq(9).text().trim();
        $("#delitoPba").val(delitoPbaT);
        var organizacionPbaT = $('td', this).eq(11).text().trim();
        $("#organizaciónPba").val(organizacionPbaT);
        var infoIdPbaT = $('td', this).eq(13).text().trim();
        $("#inforId").val(infoIdPbaT);
        var informacionPbaT = $('td', this).eq(14).text();
        $("#tituloPba").val(informacionPbaT);
        var infoDescrPbaT = $('td', this).eq(15).text();
        $("#descripPba").val(infoDescrPbaT);
        var paisT = $('td', this).eq(16).text().trim();
        $("#paisPba").val(paisT);
        var estaPbaT = $('td', this).eq(18).text().trim();
        $("#estatusPba").val(estaPbaT);
//PEP
        var fechaVigenteT = $('td', this).eq(1).text().trim();
        $("#fechPep").val(fechaVigenteT);
        var cargoT = $('td', this).eq(2).text().trim();
        $("#cargoPep").val(cargoT);
        var ciudadT = $('td', this).eq(3).text().trim();
        $("#ciudadPep").val(ciudadT);

    });

    $("#guardar").prop("disabled", true);
    $("#actualizar").prop("disabled", false);
}

function actualizarDelito() {
    var id = $("#delid").val();
    var nombre = $("#nombre").val();
    if ((nombre == '') && (id = '')) {
        alert("El delito no puede ir vació");
        return;
    }
    var datos = [id, nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "delito/actualizarDelito",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("delito");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }

    });

}
function eliminarDelito() {
    var tablaDelito = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#iddelito").val(idT);
        var id = $("#iddelito").val();
        if (id == '') {
            alert("El delito no puede ir vació");
            return;
        }
        var datos = [id];
        $(document).ajaxSend(function (e, xhr, options) {
            var token = $("input[name='_csrf']").val();
            var cabecera = "X-CSRF-TOKEN";
            xhr.setRequestHeader(cabecera, token);
        });

        $.ajax({
            url: "delito/eliminarDelito",
            data: {datos: datos},
            dataType: 'html',
            type: 'POST',
            success: function (retorno) {
                //alert(retorno);
                switch (retorno) {
                    case 'errorDato':
                        alert("Los datos no se procesaron correctamente");
                        break;
                    case 'error':
                        alert("Se ha producido un error en el servidor");
                        break;
                    case 'exito':
                        //carga lo que se indica en id DIV
                        $("#pantalla").load("delito");
                        break;
                    case 'errorAcceso':
                        alert("No ha iniciado sesion");
                        break;
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Se ha producido un error en el servidor");
            }
        });

    });

}
function agregarGiro() {
    var nombre = $("#nombre").val();
    if (nombre == '') {
        alert("El giro no puede ir vacío");
        return;
    }
    var datos = [nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "giro/agregarGiro",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("giro");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }

    });
}
function actualizarGiro() {
    var id = $("#idgiro").val();
    var nombre = $("#nombre").val();
    if (nombre == '') {
        alert("El giro no puede ir vació");
        return;
    }
    var datos = [id, nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "giro/actualizarGiro",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("giro");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
function eliminarGiro() {
    var tablaDelito = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#idgiro").val(idT);
        var id = $("#idgiro").val();
        if (id == '') {
            alert("El giro no puede ir vació");
            return;
        }
        var datos = [id];
        $(document).ajaxSend(function (e, xhr, options) {
            var token = $("input[name='_csrf']").val();
            var cabecera = "X-CSRF-TOKEN";
            xhr.setRequestHeader(cabecera, token);
        });

        $.ajax({
            url: "giro/eliminarGiro",
            data: {datos: datos},
            dataType: 'html',
            type: 'POST',
            success: function (retorno) {
                //alert(retorno);
                switch (retorno) {
                    case 'errorDato':
                        alert("Los datos no se procesaron correctamente");
                        break;
                    case 'error':
                        alert("Se ha producido un error en el servidor");
                        break;
                    case 'exito':
                        //carga lo que se indica en id DIV
                        $("#pantalla").load("giro");
                        break;
                    case 'errorAcceso':
                        alert("No ha iniciado sesion");
                        break;
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Se ha producido un error en el servidor");
            }
        });

    });
}
function agregarUsuario() {
    var nick = $("#nick").val();
    var pass = $("#pass").val();
    var email = $("#email").val();
    var rol = $("#roluser").val();
    var estatus = $("#estatususer").val();
    var nombre = $("#name").val();
    var apaterno = $("#apaterno").val();
    var amaterno = $("#amaterno").val();
    var curp = $("#curp").val();
    var sexo = $("#sexuser").val();
    var tipTel = $("#tipTel").val();
    var tel = $("#numtel").val();

    if (nick == '' || pass == '' || email == '' || nombre == '' || apaterno == '' || amaterno == '' || curp == '' || tel == '') {
        alert("El usuario no puede ir vacío");
        return;
    }
    if (rol == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (estatus == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (sexo == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (tipTel == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    var datos = [nick, pass, email, rol, estatus, nombre, apaterno, amaterno, curp, sexo, tipTel, tel];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "usuario/agregarUsuario",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("usuario");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }

    });
}
function actualizarUsuario() {
    var id = $("#idusuario").val();
    var nick = $("#nick").val();
    var pass = $("#pass").val();
    var email = $("#email").val();
    var rol = $("#roluser").val();
    var estatus = $("#estatususer").val();
    var nombre = $("#name").val();
    var apaterno = $("#apaterno").val();
    var amaterno = $("#amaterno").val();
    var curp = $("#curp").val();
    var sexo = $("#sexuser").val();
    var tipTel = $("#tipTel").val();
    var IDtel = $("#idtel").val();
    var tel = $("#numtel").val();
    var tiptel2 = $("#tipTel2").val();
    var idtel2 = $("#idtel2").val();
    var numtel2 = $("#numtel2").val();

    if (nick == '' || pass == '' || email == '' || nombre == '' || apaterno == '' || amaterno == '' || curp == '' || IDtel == '' || tel == '' || idtel2 == '' || numtel2 == '') {
        alert("El usuario no puede ir vacío");
        return;
    }
    if (rol == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (estatus == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (sexo == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (tipTel == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (tiptel2 == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    var datos = [nick, pass, email, rol, estatus, id, nombre, apaterno, amaterno, curp, sexo, tipTel, IDtel, tel, tiptel2, idtel2, numtel2];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "usuario/actualizarUsuario",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("usuario");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
function eliminarUsuario() {
    var tablaUsuario = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#iduser").val(idT);
        var id = $("#iduser").val();
        if (id == '') {
            alert("El user no puede ir vació");
            return;
        }
        var datos = [id];
        $(document).ajaxSend(function (e, xhr, options) {
            var token = $("input[name='_csrf']").val();
            var cabecera = "X-CSRF-TOKEN";
            xhr.setRequestHeader(cabecera, token);
        });

        $.ajax({
            url: "usuario/eliminarUsuario",
            data: {datos: datos},
            dataType: 'html',
            type: 'POST',
            success: function (retorno) {
                //alert(retorno);
                switch (retorno) {
                    case 'errorDato':
                        alert("Los datos no se procesaron correctamente");
                        break;
                    case 'error':
                        alert("Se ha producido un error en el servidor");
                        break;
                    case 'exito':
                        //carga lo que se indica en id DIV
                        $("#pantalla").load("usuario");
                        break;
                    case 'errorAcceso':
                        alert("No ha iniciado sesion");
                        break;
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Se ha producido un error en el servidor");
            }
        });

    });
}
function limpiarCajas() {
    $("#nombre").val("");
}
function agregarPba() {
    var noEx = $("#noEx").val();
    var fechBus = $("#fechBus").val();
    var nomPba = $("#nomPba").val();
    var apPba = $("#apPat").val();
    var amPba = $("#apMat").val();
    var curp = $("#curpPba").val();
    var sexoPba = $("#sexoPba").val();
    var delitoPba = $("#delitoPba").val();
    var organizacionPba = $("#organizaciónPba").val();
    var tituloPba = $("#tituloPba").val();
    var descripcionPba = $("#descripPba").val();
    var pais = $("#paisPba").val();
    var estatusPba = $("#estatusPba").val();

    if (noEx.isEmpty) {
        alert("El nuemro de expediente no puede ir vacío");
        return;
    }
    if (fechBus.isEmpty || nomPba.isEmpty || apPba.isEmpty || amPba.isEmpty || curp.isEmpty || sexoPba.isEmpty || delitoPba.isEmpty || organizacionPba.isEmpty) {
        alert("El numero de expediente no puede ir vacío");
        return;
    }
    var datos = [noEx, fechBus, nomPba, apPba, amPba, curp, sexoPba, delitoPba, organizacionPba, tituloPba, descripcionPba, pais, estatusPba];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "pba/agregarPba",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("pba");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
//actualizar PBA
function actualizarPba() {
    var idPba = $("#idpba").val();
    var noEx = $("#noEx").val();
    var fechBus = $("#fechBus").val();
    var nomPba = $("#nomPba").val();
    var apPba = $("#apPat").val();
    var amPba = $("#apMat").val();
    var curp = $("#curpPba").val();
    var sexoPba = $("#sexoPba").val();
    var delitoPba = $("#delitoPba").val();
    var organizacionPba = $("#organizaciónPba").val();
    var infoIdPba = $("#inforId").val();
    var tituloPba = $("#tituloPba").val();
    var descripcionPba = $("#descripPba").val();
    var pais = $("#paisPba").val();

    var estatusPba = $("#estatusPba").val();

    if (noEx.isEmpty) {
        alert("El nuemro de expediente no puede ir vacío");
        return;
    }
    if (fechBus.isEmpty || nomPba.isEmpty || apPba.isEmpty || amPba.isEmpty || curp.isEmpty || sexoPba.isEmpty || delitoPba.isEmpty || organizacionPba.isEmpty) {
        alert("El numero de expediente no puede ir vacío");
        return;
    }
    var datos = [noEx, fechBus, nomPba, apPba, amPba, curp, sexoPba, delitoPba,
        organizacionPba, tituloPba, descripcionPba, pais, idPba, infoIdPba, estatusPba];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "pba/actualizarPba",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("pba");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
//tomar el valor de quien se loguea 
function menu() {
    var user = $("#nick").val()
    if (user == 'user') {
        $("#conusu").prop('disabled', true);
    }
    alert("NO es usuario tipo user");
}
