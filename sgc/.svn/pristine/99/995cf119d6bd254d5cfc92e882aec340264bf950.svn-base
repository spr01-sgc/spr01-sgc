
$(document).ready(function () {
    $('#tableCatalogo').DataTable();
    //completaInputs(); 
});

function agregarDelito() {
    var nombre = $("#nombre").val();
    if (nombre == '') {
        alert("El delito no puede ir vacío");
        return;
    }
    var datos = [nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "delito/agregarDelito",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#contenidoPantalla").load("delito");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
function mostrarNombre() {
    //al dar clic lo que tiene en el renglo lo pase a la caja de texto
    var tablaCatalogo = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#delid").val(idT);
//id de giro
        var idgiT = $('td', this).eq(0).text();
        $("#idgiro").val(idgiT);
//id de usuario
        var idusuariT = $('td', this).eq(0).text();
        $("#idusuario").val(idusuariT);
//traer los nombres de los catalogos
        var nombreT = $('td', this).eq(1).text();
        $("#nombre").val(nombreT);
//Trae los nombres de tabla usuario
        var nombreuserT = $('td', this).eq(1).text();
        $("#nick").val(nombreT);
        var passuserT = $('td', this).eq(2).text();
        $("#pass").val(passuserT);
        var emailuserT = $('td', this).eq(3).text();
        $("#email").val(emailuserT);
        var roluserT = $('td', this).eq(4).text();
        $("#roluser").val(roluserT);
        var estatusT = $('td', this).eq(6).text();
        $("#estatususer").val(estatusT)
        var nombreT = $('td', this).eq(8).text();
        $("#name").val(nombreT)
        var apaternoT = $('td', this).eq(9).text();
        $("#apaterno").val(apaternoT)
        var amaternoT = $('td', this).eq(10).text();
        $("#amaterno").val(amaternoT)
        var curpT = $('td', this).eq(11).text();
        $("#curp").val(curpT)
        var sexoT = $('td', this).eq(12).text();
        $("#sexuser").val(sexoT)
 
        var tiptelT = $('td', this).eq(14).text();
        $("#tipTel").val(tiptelT)
        var idtelT = $('td', this).eq(16).text();
        $("#idtel").val(idtelT)
        var numtelT = $('td', this).eq(17).text();
        $("#numtel").val(numtelT)
    
   
    });
     
    $("#guardar").prop("disabled", true);
    $("#actualizar").prop("disabled", false);
}

function actualizarDelito() {
    var id = $("#delid").val();
    var nombre = $("#nombre").val();
    if ((nombre == '') && (id = '')) {
        alert("El delito no puede ir vació");
        return;
    }
    var datos = [id, nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "delito/actualizarDelito",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#contenidoPantalla").load("delito");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }

    });

}
function eliminarDelito() {
    var tablaDelito = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#iddelito").val(idT);
        var id = $("#iddelito").val();
        if (id == '') {
            alert("El delito no puede ir vació");
            return;
        }
        var datos = [id];
        $(document).ajaxSend(function (e, xhr, options) {
            var token = $("input[name='_csrf']").val();
            var cabecera = "X-CSRF-TOKEN";
            xhr.setRequestHeader(cabecera, token);
        });

        $.ajax({
            url: "delito/eliminarDelito",
            data: {datos: datos},
            dataType: 'html',
            type: 'POST',
            success: function (retorno) {
                //alert(retorno);
                switch (retorno) {
                    case 'errorDato':
                        alert("Los datos no se procesaron correctamente");
                        break;
                    case 'error':
                        alert("Se ha producido un error en el servidor");
                        break;
                    case 'exito':
                        //carga lo que se indica en id DIV
                        $("#contenidoPantalla").load("delito");
                        break;
                    case 'errorAcceso':
                        alert("No ha iniciado sesion");
                        break;
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Se ha producido un error en el servidor");
            }
        });

    });

}
function agregarGiro() {
    var nombre = $("#nombre").val();
    if (nombre == '') {
        alert("El giro no puede ir vacío");
        return;
    }
    var datos = [nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "giro/agregarGiro",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("giro");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }

    });
}
function actualizarGiro() {
    var id = $("#idgiro").val();
    var nombre = $("#nombre").val();
    if (nombre == '') {
        alert("El giro no puede ir vació");
        return;
    }
    var datos = [id, nombre];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "giro/actualizarGiro",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("giro");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
function eliminarGiro() {
    var tablaDelito = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#idgiro").val(idT);
        var id = $("#idgiro").val();
        if (id == '') {
            alert("El giro no puede ir vació");
            return;
        }
        var datos = [id];
        $(document).ajaxSend(function (e, xhr, options) {
            var token = $("input[name='_csrf']").val();
            var cabecera = "X-CSRF-TOKEN";
            xhr.setRequestHeader(cabecera, token);
        });

        $.ajax({
            url: "giro/eliminarGiro",
            data: {datos: datos},
            dataType: 'html',
            type: 'POST',
            success: function (retorno) {
                //alert(retorno);
                switch (retorno) {
                    case 'errorDato':
                        alert("Los datos no se procesaron correctamente");
                        break;
                    case 'error':
                        alert("Se ha producido un error en el servidor");
                        break;
                    case 'exito':
                        //carga lo que se indica en id DIV
                        $("#pantalla").load("giro");
                        break;
                    case 'errorAcceso':
                        alert("No ha iniciado sesion");
                        break;
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Se ha producido un error en el servidor");
            }
        });

    });
}
function agregarUsuario() {
    var nick = $("#nick").val();
    var pass = $("#pass").val();
    var email = $("#email").val();
    var rol = $("#roluser").val();
    var estatus = $("#estatususer").val()
    var nombre = $("#name").val()
    var apaterno = $("#apaterno").val()
    var amaterno = $("#amaterno").val()
    var curp = $("#curp").val()
    var sexo = $("#sexuser").val();
    var tipTel = $("#tipTel").val();
    var tel = $("#numtel").val();

    if (nick == '' || pass == '' || email == '' || nombre == '' || apaterno == '' || amaterno == '' || curp == '' || tel == '') {
        alert("El usuario no puede ir vacío");
        return;
    }
    if (rol == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (estatus == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (sexo == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (tipTel == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    var datos = [nick, pass, email, rol, estatus, nombre, apaterno, amaterno, curp, sexo, tipTel, tel];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "usuario/agregarUsuario",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("usuario");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }

    });
}
function actualizarUsuario() {
    var id = $("#idusuario").val();
    var nick = $("#nick").val();
    var pass = $("#pass").val();
    var email = $("#email").val();
    var rol = $("#roluser").val();
    var estatus = $("#estatususer").val()
    var nombre = $("#name").val()
    var apaterno = $("#apaterno").val()
    var amaterno = $("#amaterno").val()
    var curp = $("#curp").val()
    var sexo = $("#sexuser").val();
    var tipTel = $("#tipTel").val();
    var IDtel=$("#idtel").val();
    var tel = $("#numtel").val();
    if (nick == '' || pass == '' || email == '' || nombre == '' || apaterno == '' || amaterno == '' || curp == '' ||IDtel==''|| tel == '') {
        alert("El usuario no puede ir vacío");
        return;
    }
    if (rol == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (estatus == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (sexo == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    if (tipTel == 0) {
        alert("Deseleccionar una opcion");
        return;
    }
    var datos = [nick, pass, email, rol, estatus, id, nombre, apaterno, amaterno, curp, sexo, tipTel,IDtel, tel];
    $(document).ajaxSend(function (e, xhr, options) {
        var token = $("input[name='_csrf']").val();
        var cabecera = "X-CSRF-TOKEN";
        xhr.setRequestHeader(cabecera, token);
    });
    $.ajax({
        url: "usuario/actualizarUsuario",
        data: {datos: datos},
        dataType: 'html',
        type: 'POST',
        success: function (retorno) {
            //alert(retorno);
            switch (retorno) {
                case 'errorDato':
                    alert("Los datos no se procesaron correctamente");
                    break;
                case 'error':
                    alert("Se ha producido un error en el servidor");
                    break;
                case 'exito':
                    //carga lo que se indica en id DIV
                    $("#pantalla").load("usuario");
                    break;
                case 'errorAcceso':
                    alert("No ha iniciado sesion");
                    break;
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("Se ha producido un error en el servidor");
        }
    });
}
function eliminarUsuario() {
    var tablaUsuario = $("#tableCatalogo").DataTable();
    $("#tableCatalogo tbody").on('click', 'tr', function () {
        var idT = $('td', this).eq(0).text();
        $("#iduser").val(idT);
        var id = $("#iduser").val();
        if (id == '') {
            alert("El user no puede ir vació");
            return;
        }
        var datos = [id];
        $(document).ajaxSend(function (e, xhr, options) {
            var token = $("input[name='_csrf']").val();
            var cabecera = "X-CSRF-TOKEN";
            xhr.setRequestHeader(cabecera, token);
        });

        $.ajax({
            url: "usuario/eliminarUsuario",
            data: {datos: datos},
            dataType: 'html',
            type: 'POST',
            success: function (retorno) {
                //alert(retorno);
                switch (retorno) {
                    case 'errorDato':
                        alert("Los datos no se procesaron correctamente");
                        break;
                    case 'error':
                        alert("Se ha producido un error en el servidor");
                        break;
                    case 'exito':
                        //carga lo que se indica en id DIV
                        $("#pantalla").load("usuario");
                        break;
                    case 'errorAcceso':
                        alert("No ha iniciado sesion");
                        break;
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Se ha producido un error en el servidor");
            }
        });

    });
}
function limpiarCajas() {
    $("#nombre").val("");
}
//tomar el valor de quien se loguea 
function menu() {
    var user = $("#nick").val()
    if (user == 'user') {
        $("#conusu").prop('disabled', true);
    }
    alert("NO es usuario tipo user");
}
